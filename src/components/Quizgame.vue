<script setup lang="ts">
import { ref } from "vue";

interface Question {
  text: string;
  options: string[];
  correct: number;
}

const questions: Question[] = [
  {
    text: "×›××” ×”×§×œ×˜×•×ª ×©×œ×—×ª ×œ×™ ×‘×™×•× ×”×¨××©×•×Ÿ ×©×”×ª×—×œ× ×• ×œ×“×‘×¨ ×‘×•×•××˜×¡××¤",
    options: ["3", "6", "8", "9"],
    correct: 3,
  },
  {
    text: "×›××” ×–××Ÿ ×”×™×” ×”×“×™×™×˜ ×”×¨××©×•×Ÿ ×©×œ× ×•",
    options: ["×©×¢×”", "×©×¢×ª×™×™×", "×©×œ×•×© ×©×¢×•×ª", "××¨×‘×¢ ×©×¢×•×ª"],
    correct: 3,
  },
  {
    text: "××—×¨×™ ×›××” ×™××™× ××”×“×™×™×˜ ×”×¨××©×•×Ÿ ×©×œ× ×• ×”×¦×¢×ª ×œ×™ ×œ×’×•×¨ ×‘×“×™×¨×” ×©×¦××•×“×” ××œ×™×™×š",
    options: ["4 ×™××™×", "×©×‘×•×¢", "×©×‘×•×¢×™×™×", "×©×‘×•×¢×™×™× ×•×—×¦×™"],
    correct: 0,
  },
  {
    text: "×‘×›××” ×—×•×¤×©×•×ª ××• ×˜×™×•×œ×™× ×”×™×™× ×• (×‘××¨×¥ ×•×‘×—×•×´×œ)",
    options: ["4", "5", "6", "7"],
    correct: 1,
  },
  {
    text: "××™ ×§×¨××” ×¨××©×•× ×” ××××™ ×œ×©× ×™×™×”",
    options: ["×× ×™", "××ª"],
    correct: 1,
  },
  {
    text: "×•××—×¨×™ ×›××” ×–××Ÿ ××”×“×™×™×˜ ×”×¨××©×•×Ÿ ×›×‘×¨ ×”×ª×—×œ×ª ×œ×§×¨×•× ×œ×™ ××××™",
    options: ["5 ×™××™×", "×©×‘×•×¢", "×©×‘×•×¢ ×•×™×•××™×™×", "×—×•×“×©"],
    correct: 0,
  },
  {
    text: "××—×¨×™ ×›××” ×–××Ÿ ×”×›×¨×—×ª×™ ××•×ª×š ×œ×”×¤×’×© ×¢× ×—×‘×¨×•×ª ×©×œ×™(×‘×¨ ×•×’××™×”) ×‘×™×¢×§×‘ ×‘× ×—×œ×”",
    options: ["×©×‘×•×¢", "×©×‘×•×¢ ×•×—×¦×™", "×©×‘×•×¢×™×™×", "×—×•×“×© ×•×©×‘×•×¢"],
    correct: 2,
  },
  {
    text: "××™×–×” ××©×¤×˜ ×”×™×™×ª×™ ××•××¨×ª ×œ×š ×”×¨×‘×” ×‘×”×ª×—×œ×” ×©×œ× ×•",
    options: ["××’× ×•×‘×™", "××™×–×” ×ª×—×ª ×™×¤×” ×™×© ×œ×š", "×œ× ×œ×©×¤×•×˜", "×œ×× ×–×” ×”×–×•×™ ×‘×¢×™×™× ×™"],
    correct: 2,
  },
  {
    text: "××” ×”×™×™×ª ××•××¨×ª ×œ×™ ×›×“×™ ×©××–×›×™×¨ ×œ×š ×œ×¡×¤×¨ ×œ×™ ×“×‘×¨×™× ×›×©× ×¤×’×©",
    options: ["×ª×¨×©××™ ×‘×¤×ª×§×™×", "×ª×©×™××™ ×ª×–×›×•×¨×ª", "×ª×›×ª×‘×™ ×‘×—×•×œ", "×©×™××™ ×©×¢×•×Ÿ ××¢×•×¨×¨"],
    correct: 2,
  },
  {
    text: "×‘×“×™×™×˜ ×”×©×œ×™×©×™ ×©×œ× ×• ×‘×§×•×œ× ×•×¢ ×”×¤×¡×’×” ××ª ×¢×‘×“×ª ×¢×œ×™×™, ×–×•×›×¨×ª ××™×š",
    options: [
      "×××¨×ª ×©××ª ×—×•×‘×‘×ª ×¡×¨×˜×™× ×™×©× ×™×",
      "×××¨×ª ×©××ª ×”×•×œ×›×ª ×œ×©× ×›×œ ×”×–××Ÿ",
      "×××¨×ª ×©×§× ×™×ª ×™×™×Ÿ ××™×˜×œ×§×™ ××©×•×‘×š ××‘×œ ×”×•× ×‘×¢×¦× ×”×™×” ×™×™×Ÿ ×¨×’×™×œ ×•×–×•×œ",
      "×××¨×ª ×©××ª ×œ× ××•×”×‘×ª ××©×—×§×™ ××™×œ×™×",
    ],
    correct: 2,
  },
  {
    text: "××” ×”×“×‘×¨ ×”×—××•×¨ ×©×¢×©×™× ×• ×‘×“×™×™×˜ ×”×¨×‘×™×¢×™(×‘×¢×¨×š) ×©×œ× ×•",
    options: [
      "×‘×¨×—× ×• ×‘×œ×™ ×œ×©×œ×",
      "××›×œ× ×• ××©×•×œ×—×Ÿ ×©×œ× ×©×œ× ×•",
      "×’× ×‘× ×• ×©×ª×™ ×›×•×¡×•×ª ×™×™×Ÿ",
      "×”×ª×—×¦×¤× ×• ×œ××œ×¦×¨×™×",
    ],
    correct: 2,
  },
  {
    text: "××™×š ×§×¨××• ×œ××œ×•×Ÿ ×”×¨××©×•×Ÿ ×©×”×™×™× ×• ×‘×• ×‘×ª××™×œ× ×“",
    options: [
      "Love Island",
      "The Beach Resort",
      "Paradise Hotel",
      "Love Beach",
    ],
    correct: 3,
  },
  {
    text: "××™×š ×§×¨××• ×œ××™ ×”×‘×•×“×“ ×©×’×™×œ×™× ×• ×‘×ª××™×œ×“",
    options: ["koh Ma", "Koh Tae Nai", "Koh Yao Yai", "Koh Nom Sao"],
    correct: 1,
  },
  {
    text: "××™×š ×§×¨××• ×œ×¤×§×™×“ ×‘×’×¨×™×Ÿ ×¤×¤××™×”",
    options: ["×©×•", "×™×•", "××”", "×œ×"],
    correct: 1,
  },
  {
    text: "×‘×›××” ×”×•×¤×¢×•×ª ×”×™×™× ×• ×™×—×“",
    options: ["2", "3", "4", "5"],
    correct: 3,
  },
  {
    text: "×¢×œ ××™×–×• ××™×œ×” ××• ××©×¤×˜ × ×ª×¢×§× ×• ×§×•×“×",
    options: [
      "×©×ª×™×œ×”",
      "××•×”×‘×ª ××•×ª×—×ª",
      "×˜××•×‘×‘(×›××• ×™×¢×œ ×¤×•×œ×™××§×•×‘)",
      "×”××™×–×•×Ÿ ×”××•×©×œ×",
    ],
    correct: 2,
  },
  {
    text: "××” ×”××©×¤×˜ ×©×œ ××× ×©×œ×š ×©×× ×™ ×”×›×™ ××•×”×‘×ª",
    options: ["×©×§×™×ª ×”×§××”", "×©×™-×—×•×§", "×¤××§ ×¨×¦×™× ×™", "×ª×©×™××™ ×¤×™×’×³××” ×•×–×”×•"],
    correct: 2,
  },
  {
    text: "×œ×¤× ×™ ×©×”×›×¨×ª×™ ××ª ××©×¤×—×ª×š ×‘××ª×™ ××™×ª×š ×œ××•×“×™×¢×™×Ÿ ×•× ×©××¨×ª×™ ××¦×œ ××× ×©×œ×š ×‘×–××Ÿ ×©×”×™×™×ª ××¦×œ ×¡×¤×™×¨, ××” ×”×›×¨×—×ª ××•×ª×™ ×œ×¢×©×•×ª",
    options: [
      "×œ×©×˜×•×£ ×›×œ×™×",
      "×œ×¡×“×¨ ××ª ×”×‘×™×ª",
      "×œ×¢×©×•×ª ×©× ×´×¦ ×‘×—×“×¨ ×©×œ×š",
      "×œ×”×¦×˜×œ× ×‘×¡×•×›×”",
    ],
    correct: 3,
  },
  {
    text: "×›××” ×–××Ÿ ×©×›×—×ª ××•×ª×™ ×‘×©×™×—×ª ×•×™×“××• ×‘×—×“×¨ ××©×¤×—×” ××•×œ ×§×¨×™×§×˜×•×¨×” ×©×œ ××‘× ×©×œ×š",
    options: ["10 ×“×§×•×ª", "×—×¦×™ ×©×¢×”", "×©×¢×”", "×©×¢×ª×™×™× ×•×—×¦×™"],
    correct: 2,
  },
  {
    text: "×›××” ×× ×™ ××•×”×‘×ª ××•×ª×š ×1 ×¢×“ ××™×œ×™×•×Ÿ",
    options: ["1", "43", "10043", "1000000"],
    correct: 3,
  },
];

const currentIndex = ref(0);
const selectedIndex = ref<number | null>(null);
const isCorrect = ref(false);
const showFeedback = ref(false);

function selectOption(index: number) {
  if (showFeedback.value) return;
  selectedIndex.value = index;
  const correct = questions[currentIndex.value].correct;

  if (index === correct) {
    isCorrect.value = true;
    showFeedback.value = true;
    setTimeout(() => {
      showFeedback.value = false;
      selectedIndex.value = null;
      isCorrect.value = false;
      if (currentIndex.value < questions.length - 1) {
        currentIndex.value++;
      } else {
        alert("ğŸ‰××××™×§ ×™× ××œ×•×¤×” ×× ×™ ××§×•×•×” ×©×”×¦×œ×—×ª ××ª ×”×¨×•×‘! ×× ×™ ××•×”×‘×ª ××•×ª×šğŸ’–");
      }
    }, 1500);
  } else {
    isCorrect.value = false;
    showFeedback.value = true;
    setTimeout(() => {
      showFeedback.value = false;
      selectedIndex.value = null;
    }, 1000);
  }
}
</script>

<template>
  <div class="quiz-container">
    <!-- Stepper -->
    <div class="stepper">
      <div
        v-for="(q, i) in questions"
        :key="i"
        class="step"
        :class="{ active: i <= currentIndex }"
      >
        {{ i + 1 }}
      </div>
    </div>

    <!-- Question -->
    <h2 class="question">{{ "?" + questions[currentIndex].text }}</h2>

    <!-- Options -->
    <div class="options">
      <button
        v-for="(option, i) in questions[currentIndex].options"
        :key="i"
        class="option"
        :class="{
          selected: i === selectedIndex,
          correct: showFeedback && i === questions[currentIndex].correct,
          wrong:
            showFeedback &&
            i === selectedIndex &&
            i !== questions[currentIndex].correct,
        }"
        @click="selectOption(i)"
      >
        {{ option }}
      </button>
    </div>

    <!-- Feedback -->
    <div v-if="showFeedback" class="feedback">
      <span v-if="isCorrect" class="correct-text">âœ… Correct!</span>
      <span v-else class="wrong-text">ğŸ’Œ Try again</span>
    </div>
  </div>
</template>

<style scoped>
.quiz-container {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 3rem 1.5rem;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  color: #fff;
  text-align: center;
  gap: 2rem;
}

.stepper {
  display: flex;
  gap: 0.8rem;
  margin-bottom: 2rem;
}

.step {
  width: 2.2rem;
  height: 2.2rem;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: #fff;
  transition: all 0.3s;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.4) inset;
}

.step.active {
  background: #ff6b81;
  box-shadow: 0 0 10px #ff6b81;
}

.question {
  font-size: 2rem;
  font-weight: bold;
  text-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

.options {
  display: grid;
  gap: 1rem;
  width: 100%;
  max-width: 500px;
}

.option {
  background: rgba(255, 255, 255, 0.2);
  border: 2px solid transparent;
  color: #fff;
  padding: 1rem;
  border-radius: 1rem;
  font-size: 1.3rem;
  transition: all 0.2s;
  cursor: pointer;
}

.option:hover {
  background: rgba(255, 255, 255, 0.3);
}

.option.correct {
  background: #4caf50;
  animation: pop 0.3s;
}

.option.wrong {
  background: #f44336;
  animation: shake 0.4s;
}

.feedback {
  font-size: 1.5rem;
  margin-top: 1rem;
}

.correct-text {
  color: #4caf50;
}

.wrong-text {
  color: #f44336;
}

@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-8px);
  }
  50% {
    transform: translateX(8px);
  }
  75% {
    transform: translateX(-8px);
  }
}

@keyframes pop {
  0% {
    transform: scale(0.8);
  }
  100% {
    transform: scale(1);
  }
}
</style>
